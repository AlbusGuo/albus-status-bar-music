# 🎵 Albus Status Bar Music

> 在 Obsidian 状态栏享受音乐，让知识创作与美妙旋律相伴

![ObsidianPlugin](https://img.shields.io/badge/Obsidian-Plugin-red?logo=obsidian)
![Version](https://img.shields.io/badge/Version-0.2.0-blue)
![release](https://img.shields.io/github/downloads/AlbusGuo/albus-status-bar-music/total?style=flat&label=Total%20Downloads)

## 🌟 为什么选择 Albus Status Bar Music？

厌倦了在音乐播放器和笔记软件之间来回切换？Albus Status Bar Music 让你在 Obsidian 中直接享受音乐，让知识创作与美妙旋律完美融合。

### 🎵 **核心功能**

#### 📱 **状态栏音乐控制**
- 实时显示当前播放歌曲和艺术家
- 一键播放/暂停控制
- 快捷切换上一首/下一首
- 可视化播放进度条
- **歌词模式**：在状态栏显示实时滚动歌词
- 不占用笔记空间，音乐尽在掌控

#### 🎨 **精美音乐中心**
- **黑胶唱片播放器**：逼真的旋转动画，带来怀旧音乐体验
- **智能歌单管理**：自动按文件夹组织音乐
- **实时搜索**：快速找到想听的歌曲
- **封面显示**：自动加载专辑封面，缺失时显示优雅占位符
- **音量控制**：垂直滑块调节音量，支持静音图标切换
- **可拖拽界面**：自由定位音乐中心窗口

#### 🎤 **强大的歌词功能**
- **悬浮歌词窗口**：独立的歌词显示器，可自由拖动和锁定
- **双行显示**：当前行 + 下一行预览
- **平滑动画**：歌词滑入滑出效果，视觉体验流畅
- **锁定模式**：透明背景，鼠标穿透，完全不影响操作
- **主题自适应**：文字描边效果，浅色/深色主题均清晰可见
- **双击解锁**：锁定状态下双击歌词窗口即可解锁
- **自动同步**：与播放进度完美同步，支持点击跳转

#### 🎵 **完整播放体验**
- 支持多种音频格式：MP3、FLAC、WAV、M4A、OGG、APE、WMA
- 三种播放模式：列表循环、单曲循环、随机播放
- 红心歌单：收藏喜爱的歌曲
- 进度调节：点击或拖动进度条快速定位
- 元数据缓存：快速加载歌曲信息

## 📦 安装指南


1. **下载插件文件**
   - 访问 [GitHub Releases 页面](https://github.com/AlbusGuo/albus-status-bar-music/releases)
   - 下载最新版本的插件文件到 Obsidian 插件目录

2. **启用插件**
   - 在插件列表中找到 **Albus Status Bar Music**
   - 点击开关启用插件



## 🎯 快速开始

### 📁 **设置音乐文件夹**

1. 打开 Obsidian 设置
2. 找到 **Albus Status Bar Music** 插件设置
3. 点击 **选择音乐文件夹**
4. 选择包含音乐文件的文件夹
5. 插件会自动扫描并加载所有音乐文件

### 🎵 **开始播放**

- **状态栏控制**：
  - 点击歌曲信息打开音乐中心
  - 使用播放/暂停按钮控制播放
  
- **音乐中心**：
  - 点击黑胶唱片或播放按钮开始播放
  - 点击左右两侧小唱片切换歌曲
  - 拖动顶部手柄可移动窗口位置
  
- **歌词功能**：
  - 点击音乐中心的歌词按钮显示悬浮歌词
  - 再次点击关闭悬浮歌词，启用状态栏歌词
  - 点击歌词窗口的锁定按钮进入透明穿透模式
  - 双击锁定的歌词窗口可解锁

- **音量调节**：
  - 点击音乐中心的音量按钮
  - 拖动垂直滑块调节音量
  - 音量为0时自动切换为静音图标


## 💡 使用技巧

### 🎨 **界面定制**
- **拖动定位**：拖动音乐中心顶部手柄到任意位置
- **背景效果**：根据专辑封面自动调整背景颜色
- **悬浮歌词**：可以独立拖动歌词窗口，不与音乐中心绑定

### 🎤 **歌词使用技巧**
- **切换模式**：点击歌词按钮在悬浮歌词和状态栏歌词之间切换
- **锁定窗口**：锁定后歌词窗口完全不影响鼠标操作，可以放在任何位置
- **跳转播放**：点击悬浮歌词的歌词行可以跳转到对应时间点
- **主题适配**：歌词文字带有描边效果，在任何背景下都清晰可见

### 📚 **歌单管理**
- **文件夹即歌单**：每个子文件夹自动成为一个歌单
- **红心收藏**：点击红心按钮收藏喜爱的歌曲
- **快速切换**：使用歌单选择器快速切换不同音乐类型
- **刷新按钮**：添加新音乐后点击刷新按钮重新扫描

### 🔍 **搜索技巧**
- **多关键词搜索**：可以同时搜索歌曲名和艺术家
- **实时过滤**：输入即搜索，无需按回车
- **模糊匹配**：支持部分关键词匹配

## 🎵 支持的音乐格式

| 格式 | 扩展名 | 说明 |
|------|--------|------|
| MP3 | `.mp3` | 最常见的音频格式 |
| FLAC | `.flac` | 无损音频格式 |
| WAV | `.wav` | 无压缩音频格式 |
| M4A | `.m4a` | Apple 音频格式 |
| OGG | `.ogg` | 开源音频格式 |
| APE | `.ape` | 无损音频格式 |
| WMA | `.wma` | Windows Media 音频格式 |

### 📝 **歌词支持**
- 歌词需要在音频文件的元数据中包含
- 支持标准 LRC 格式（带时间轴）

## ⚙️ 高级设置

### 🎛️ **界面设置**
- **显示状态栏控制按钮**：开启/关闭状态栏的播放控制按钮
- **点击外部关闭音乐中心**：启用后点击音乐中心外部会自动关闭窗口

### 📊 **性能优化**
- **元数据缓存**：自动缓存音乐信息，提高加载速度
- **异步加载**：不阻塞 Obsidian 启动
- **内存管理**：智能缓存策略，平衡性能与内存
- **清空缓存**：在设置中可以清空元数据缓存，重新提取音乐信息

## 🐛 常见问题

### ❓ **音乐无法播放？**
1. 检查音乐文件夹路径是否正确
2. 确认音频文件格式受支持
3. 尝试点击刷新按钮重新扫描音乐库
4. 检查文件是否损坏或编码异常

### ❓ **封面不显示？**
1. 确认音频文件包含封面信息

### ❓ **歌词不同步？**
1. 确认音频文件的元数据中包含 LRC 格式的歌词
2. 检查歌词的时间轴格式是否正确（`[mm:ss.xx]`）
3. 状态栏歌词和悬浮歌词使用同一数据源，应该始终同步
4. 可以使用音频标签编辑工具（如 Mp3tag）检查和编辑歌词

### ❓ **悬浮歌词无法解锁？**
- 在锁定状态下，双击歌词窗口任意位置即可解锁
- 确保鼠标点击在歌词窗口边界内


## 🤝 贡献与反馈

### 🐛 **报告问题**
- 在 [GitHub Issues](https://github.com/AlbusGuo/albus-status-bar-music/issues) 报告 bug
- 请提供详细的错误信息和复现步骤

### 💡 **功能建议**
- 欢迎提出新功能建议
- 在 Issues 中描述你希望的功能

### 🎨 **贡献代码**
- Fork 项目并创建 Pull Request
- 遵循项目的代码规范

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户！

---

**让音乐陪伴你的每一次知识创作之旅 🎵**
